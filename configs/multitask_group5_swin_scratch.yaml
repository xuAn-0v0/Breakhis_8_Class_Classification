# Group 5: Swin Transformer (from scratch, no pretrained weights)
# 多任务学习：同时训练二分类（良性/恶性）和八分类（8具体类别）

experiment_name: "multitask_group5_swin_scratch"
group: "group5"

# Model Configuration
model:
  name: "ctranspath_multitask"     # 使用Swin架构包装
  num_classes_binary: 2           # 二分类
  num_classes_multiclass: 8       # 八分类
  use_multiclass: true
  pretrained_path: null           # 不加载预训练，随机初始化
  classifier_type: "linear"       # 线性分类头
  freeze_backbone: false          # 不冻结，端到端训练

# Data Configuration
data:
  dataset_root: "/songjian/zixuan/dataset_cancer_v1"
  train_csv: "train_split_40x_100x_mixed.csv"
  val_csv: "val_split_40x_100x_mixed.csv"
  test_csv_40x: "test_split_40x.csv"
  test_csv_100x: "test_split_100x.csv"
  image_size: 224
  batch_size: 16                  # 略小batch以适配从零训练的Swin
  num_workers: 4

# Training Configuration
training:
  epochs: 60
  optimizer: "adam"
  learning_rate: 0.0001
  weight_decay: 0.0001
  scheduler: "cosine"

  # Loss
  loss: "focal_loss"
  focal_alpha: null               # 不使用类权重（需Tensor时保持null）
  focal_gamma: 2.0

  # 多任务权重
  alpha_multiclass: 1.0

  # Early stopping
  early_stopping: true
  patience: 10

# Checkpoint Configuration
checkpoint:
  save_dir: "multitask_results/checkpoints/group5_swin_scratch"
  save_best_only: true
  save_freq: 10

# Results Configuration
results:
  save_dir: "multitask_results/results/group5_swin_scratch"
  save_predictions: true
  plot_confusion_matrix: true
  plot_training_history: true

# Device Configuration
device: "cuda"
seed: 42

